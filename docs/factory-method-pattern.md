# **Factory Pattern**üè≠ | [BookSearchStrategyFactory](https://github.com/DreammyOleksandr/nodebook-server/tree/main/src/books/components/books.searchStrategyFactory.ts)

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º–∏ üìù

–£ –¥–æ–¥–∞—Ç–∫–∞—Ö, –¥–µ –ø–æ—à—É–∫ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –∑–∞ –±–∞–≥–∞—Ç—å–º–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–Ω–∏–≥–∏ –º–æ–∂–Ω–∞ —à—É–∫–∞—Ç–∏ –∑–∞ –Ω–∞–∑–≤–æ—é, –∞–≤—Ç–æ—Ä–æ–º, –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Å—Ç–æ—Ä—ñ–Ω–æ–∫, —Ä–µ–π—Ç–∏–Ω–≥–æ–º —Ç–æ—â–æ), —á–∞—Å—Ç–æ –≤–∏–Ω–∏–∫–∞—î –ø–æ—Ç—Ä–µ–±–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –Ω–∞–±—ñ—Ä —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π –ø–æ—à—É–∫—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–≤–µ–¥–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤. –Ø–∫—â–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ –ª–æ–≥—ñ–∫—É –ø–æ—à—É–∫—É –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —É —Å–µ—Ä–≤—ñ—Å, —Ü–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–∞–¥–º—ñ—Ä–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ, –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É —Ç–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—É –≤—ñ–¥–∫—Ä–∏—Ç–æ—Å—Ç—ñ/–∑–∞–∫—Ä–∏—Ç–æ—Å—Ç—ñ (OCP).

## –ü—Ä–∏—á–∏–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—É Factory ü§î

Factory Pattern –¥–æ–ø–æ–º–∞–≥–∞—î:

- **–Ü–Ω–∫–∞–ø—Å—É–ª—é–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤**: –ª–æ–≥—ñ–∫–∞ –≤–∏–±–æ—Ä—É —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π –ø–æ—à—É–∫—É –≤–∏–Ω–µ—Å–µ–Ω–∞ –≤ –æ–∫—Ä–µ–º–∏–π –∫–ª–∞—Å-—Ñ–∞–±—Ä–∏–∫—É, –∞ –Ω–µ —Ä–æ–∑–∫–∏–¥–∞–Ω–∞ –ø–æ –∫–æ–¥—É.
- **–ó–º–µ–Ω—à–∏—Ç–∏ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å**: —Å–µ—Ä–≤—ñ—Å –Ω–µ –∑–Ω–∞—î, —è–∫—ñ —Å–∞–º–µ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —ñ—Å–Ω—É—é—Ç—å —ñ —è–∫ —ó—Ö —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏.
- **–õ–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏**: –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–ª–∞—Å —ñ –æ–Ω–æ–≤–∏—Ç–∏ —Ñ–∞–±—Ä–∏–∫—É, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –ø–æ—à—É–∫—É.
- **–î–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ SOLID**: –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –≤—ñ–¥–∫—Ä–∏—Ç–æ—Å—Ç—ñ/–∑–∞–∫—Ä–∏—Ç–æ—Å—Ç—ñ —Ç–∞ —î–¥–∏–Ω–æ–≥–æ –æ–±–æ–≤‚Äô—è–∑–∫—É.

## –û–ø–∏—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó ‚úÖ

- **BookSearchStrategyFactory**: —Å—Ç–∞—Ç–∏—á–Ω–∏–π –∫–ª–∞—Å, —è–∫–∏–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó–≤ –ø–æ—à—É–∫—É —Å—Ç–≤–æ—Ä—é—î –º–∞—Å–∏–≤ –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π.
- **SearchStrategy**: —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å/–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –≤—Å—ñ—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π –ø–æ—à—É–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, NameSearchStrategy, AuthorSearchStrategy, PageQuantitySearchStrategy, RatingSearchStrategy).
- **SearchContext**: –∫–ª–∞—Å, —â–æ –∞–≥—Ä–µ–≥—É—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —Ç–∞ –±—É–¥—É—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
- **BookService**: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π —Ç–∞ –¥–µ–ª–µ–≥—É—î —ó–º –ø–æ–±—É–¥–æ–≤—É –∑–∞–ø–∏—Ç—É.

## –ö–æ–¥–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è üíª

```ts
// BookSearchStrategyFactory.ts
export class BookSearchStrategyFactory {
  static createStrategies(criteria: BookSearchCriteria): SearchStrategy[] {
    const strategies: SearchStrategy[] = []

    if (criteria.name) {
      strategies.push(new NameSearchStrategy())
    }
    if (criteria.author) {
      strategies.push(new AuthorSearchStrategy())
    }
    if (criteria.minPages !== undefined || criteria.maxPages !== undefined) {
      strategies.push(new PageQuantitySearchStrategy())
    }
    if (criteria.minRating !== undefined || criteria.maxRating !== undefined) {
      strategies.push(new RatingSearchStrategy())
    }

    return strategies
  }
}
```

```ts
// BookService.ts (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)
async searchBooks(criteria: BookSearchCriteria): Promise {
  this.searchContext = new SearchContext()
  const strategies = BookSearchStrategyFactory.createStrategies(criteria)
  this.searchContext.addStrategies(strategies)
  const query = this.searchContext.buildQuery(criteria)
  return this.populateBook(this.bookModel.find(query))
}
```

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î? üõ†Ô∏è

1. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä—ñ—ó –ø–æ—à—É–∫—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —ñ–º'—è –∞–≤—Ç–æ—Ä–∞ —Ç–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥).
2. **BookSearchStrategyFactory** –∞–Ω–∞–ª—ñ–∑—É—î –∫—Ä–∏—Ç–µ—Ä—ñ—ó —Ç–∞ —Å—Ç–≤–æ—Ä—é—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –ø–æ—à—É–∫—É.
3. **SearchContext** –æ—Ç—Ä–∏–º—É—î —Ü—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —Ç–∞ –±—É–¥—É—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –∫–æ–º–±—ñ–Ω—É—é—á–∏ –ª–æ–≥—ñ–∫—É –∫–æ–∂–Ω–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó.
4. **BookService** –æ—Ç—Ä–∏–º—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É, –Ω–µ –∑–Ω–∞—é—á–∏ –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–∂–Ω–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó.

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞–∫–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É üåü

- **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –ø–æ—à—É–∫—É –±–µ–∑ –∑–º—ñ–Ω–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥—É.
- **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å**: –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π –∑–æ—Å–µ—Ä–µ–¥–∂–µ–Ω–∞ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.
- **–¢–µ—Å—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å**: –∫–æ–∂–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –º–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ.
